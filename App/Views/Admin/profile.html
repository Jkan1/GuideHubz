{% extends "base_admin.html" %} {% block title %} Admin Login {% endblock %} {%
block body %}

<div class="container">
  <div class="row">
    <h1 class="center">
      Welcome Mr.<span class="blue-text">{{ user }}</span>
          <a href="/admin/logout" class="btn red lighten-1">Logout</a>
    </h1>
  </div>
</div>

<div class="container">
  <ul id="tabs-swipe-demo" class="tabs">
    <li class="tab col s3 m4 l4">
      <a class="active" href="#test-swipe-1">Upload Exam Papers</a>
    </li>
    <li class="tab col s3 m4 l4">
      <a href="#test-swipe-2">Send Email Notifications</a>
    </li>
    <li class="tab col s3 m4 l4">
      <a href="#test-swipe-3">Update Job List</a>
    </li>
  </ul>
  <div id="test-swipe-1" class="col s12 blue">
    <div class="col s12 m10 offset-m1">
      <div class="center">
        <div class="card-panel grey darken-4 red-text text-lighten-2 z-depth-3">
          <form
            action=""
            method="post"
            onSubmit="return formCheck()"
            enctype="multipart/form-data">
            <div class="input-field">
              <input type="text" name="name" id="name" />
              <label for="name">Title</label>
            </div>
            <div class="input-field">
              <input type="text" name="year" id="year" />
              <label for="year">Year</label>
            </div>
            <div class="input-field">
              <input type="text" name="filename" id="filename" />
              <label for="filename">Filename</label>
            </div>
            <div class="input-field">
              <input type="text" name="comment" id="comment" />
              <label for="comment">Comment</label>
            </div>
            <div class="input-field">
              <select name="category" id="category">
                <option value="" disabled selected>Select Category</option>
                <option value="Private"> Private</option>
                <option value="Railway"> Railway</option>
                <option value="Bank PO"> Bank PO</option>
                <option value="UPSC"> UPSC</option>
                <option value="SSC"> SSC</option>
                <option value="AFCAT"> AFCAT</option>
                <option value="CDS"> CDS</option>
                <option value="Punjab Police"> Punjab Police</option>
                <option value="PPSC"> PPSC</option>
                <option value="Delhi Police"> Delhi Police</option>
                <option value="UPPSC"> UPPSC</option>
                <option value="MPPSC"> MPPSC</option>
              </select>
              <label for="category">Category</label>
            </div>
            <div class="input-field">
              <div class="file-field input-field">
                <div class="btn small">
                  <span>Browse</span>
                  <input
                    type="file"
                    name="upload_file"
                    id="upload_file"
                    required/>
                </div>
                <div class="file-path-wrapper">
                  <input
                    class="file-path validate"
                    type="text"
                    placeholder="Upload file"/>
                </div>
              </div>
            </div>
            <br />
            <button
              type="submit"
              name="submit"
              class="btn btn-large white black-text btn-extend">
              Upload
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <div id="test-swipe-2" class="col s12 red">
    <div class="col s12 m10 offset-m1">
      <div class="center">
        <div class="card-panel grey darken-4 white-text z-depth-3  left-align">
          <form
            action=""
            method="post"
            onSubmit="return emailCheck()"
            enctype="multipart/form-data">
            <span class="indigo-text text-lighten-2">From:</span>
            noreply@guidehubz.com <br /><br />
            <span class="indigo-text text-lighten-2">To:</span> (All
            Subscribers) <br />
            <br />
            <div class="input-field">
              <input type="text" name="subject" id="subject" />
              <label for="name" class="indigo-text text-lighten-2"
                >Subject</label>
            </div>
            <div class="row">
              <div class="input-field s12 m10 offset-m1">
                <textarea
                  id="message"
                  name="message"
                  class="materialize-textarea"
                  data-length="120"></textarea>
                <label for="message" class="indigo-text text-lighten-2" >Message</label>
              </div>
            </div>
            <br />
            <button
              type="submit"
              name="sendtoall"
              id="sendtoall"
              class="btn btn-large white black-text btn-extend">
              Send
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
  <div id="test-swipe-3" class="col s12 green">
    <div class="col s12 m10 offset-m1">
      <div class="center">
        <div class="card-panel grey darken-4 yellow-text z-depth-3">
          <form action="" method="post" onSubmit="return formJobCheck()" enctype="multipart/form-data">
            <div class="input-field">
              <input type="text" name="title" id="title" />
              <label for="title">Title</label>
            </div>
            <div class="row">
                <div class="input-field s12 m10 offset-m1">
                  <textarea
                    id="description"
                    name="description"
                    class="materialize-textarea"></textarea>
                  <label for="description">Description</label>
                </div>
              </div>
            <div class="row">
                <div class="input-field s12 m10 offset-m1">
                  <textarea
                    id="eligibility"
                    name="eligibility"
                    class="materialize-textarea"></textarea>
                  <label for="eligibility">Eligibility</label>
                </div>
              </div>
              <div class="row">
                  <div class="input-field s12 m10 offset-m1">
                    <textarea
                      id="impdates"
                      name="impdates"
                      class="materialize-textarea"></textarea>
                    <label for="impdates">Important Dates</label>
                  </div>
                </div>
                <div class="row">
                    <div class="input-field s12 m10 offset-m1">
                      <textarea
                        id="website"
                        name="website"
                        class="materialize-textarea"></textarea>
                      <label for="website">Official Website</label>
                    </div>
                  </div>
            <div class="input-field">
              <select name="Jobcategory" id="Jobcategory">
                <option value="" disabled selected>Select Category</option>
                <option value="Private"> Private</option>
                <option value="UPSC"> UPSC</option>
                <option value="SSC"> SSC</option>
                <option value="AFCAT"> AFCAT</option>
                <option value="CDS"> CDS</option>
                <option value="Punjab Police"> Punjab Police</option>
                <option value="PPSC"> PPSC</option>
                <option value="Delhi Police"> Delhi Police</option>
                <option value="UPPSC"> UPPSC</option>
                <option value="MPPSC"> MPPSC</option>
                <option value="Other"> Other</option>
              </select>
              <label for="Jobcategory">Category</label>
            </div>
            <br />
            <button
              type="submitJob"
              name="submitJob"
              class="btn btn-large white black-text btn-extend">
              Update
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
<br />

<script>
  function emailCheck() {
    var subject = document.getElementById("subject").value;
    var message = document.getElementById("message").value;

    if (subject == "" || message == "") {
      alert("Enter all details!");
      return false;
    } else if (subject.length > 30) {
      alert("Subject Should be shorter!");
      return false;
    } else if (message.length < 40) {
      alert("Message Should be longer!");
      return false;
    } else {
      return confirm("Confirm Send?");
    }
  }

  function formCheck() {
    var name = document.getElementById("name").value;
    var year = document.getElementById("year").value;
    var filename = document.getElementById("filename").value;
    var categoryId = document.getElementById("category");
    var category = categoryId.options[categoryId.selectedIndex].value;
    var upload = document.getElementById("upload_file").value;
    regex = new RegExp("(.*?)\.(docx|doc|pdf|PDF|DOC)$");
    if (name == "" || year == "" || filename == "" || category == "") {
      alert("Enter all details!");
      return false;
    } else if (!yearValidation(year)) {
      return false;
    } else if (!regex.test(upload)) {
      alert("Please select correct file format (.pdf)");
      return false;
    } else {
      return confirm("Confirm Upload?");
    }
  }

  function yearValidation(year) {
    var text = /^[0-9]+$/;
    if (year != 0) {
      if (year != "" && !text.test(year)) {
        alert("Please Enter Numeric Values for year!");
        return false;
      }

      if (year.length != 4) {
        alert("Year is not correct Please check!");
        return false;
      }
      var current_year = new Date().getFullYear();
      if (year < 1920 || year > current_year) {
        alert("Year should be in range 1920 to current year!");
        return false;
      }
      return true;
    }
  }

  function formJobCheck() {
    var title = document.getElementById("title").value;
    var eligibility = document.getElementById("eligibility").value;
    var impdates = document.getElementById("impdates").value;
    var description = document.getElementById("description").value;
    var categoryId = document.getElementById("Jobcategory");
    var category = categoryId.options[categoryId.selectedIndex].value;
    var website = document.getElementById("website").value;
    if (title.length < 5 || eligibility.length < 20 || impdates.length < 10 || description.length < 20 || website == "" || category == "") {
      alert("Enter all details carefully!");
      return false;
    } else {
      return confirm("Confirm Upload?");
    }
  }

</script>

{% endblock %}
